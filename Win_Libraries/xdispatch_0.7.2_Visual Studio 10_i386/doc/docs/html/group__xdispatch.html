<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libxdispatch</title>
	<link href="search/search.css" rel="stylesheet" type="text/css">
	<link href="styles.css" rel="stylesheet" type="text/css">
		
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="search/search.js"></script>
	<script type="text/javascript">
	  $(document).ready(function() { searchBox.OnSelectItem(0); });
	</script>
</head><body>
<div class="custom_header" style="padding-left: 150px;">XDispatch 0.7.2</div>
<!--
<div id="global_nav">
	<a href="http://opensource.mlba-team.de/xdispatch/news.htm">
		<div class="global_nav_item" style="background-image: URL(nav_news.png);">
		<span>News</span><br/>
		Updates and announcements
		</div>
	</a>
	<a href="http://opensource.mlba-team.de/xdispatch/files">
		<div class="global_nav_item" style="background-image: URL(nav_downloads.png);">
		<span>Downloads</span><br/>
		Obtain binaries and source packages
		</div>
	</a>
	<a href="http://opensource.mlba-team.de/mailman/listinfo/libxdispatch">
		<div class="global_nav_item" style="background-image: URL(nav_mailinglist.png);">
		<span>Mailing List</span><br/>
		Join the discussion
		</div>
	</a>
	<a href="tutorial.html">
		<div class="global_nav_item" style="background-image: URL(nav_tutorial.png);">
		<span>Getting started</span><br/>
		The first steps to using xdispatch
		</div>
	</a>
</div>
-->
<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Special&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<div class="title">libxdispatch</div>  </div>
</div><!--header-->
<div class="contents">

<p>libxdispatch is a C++ API build on top of libdispatch and simplifying the usage by providing an object-oriented way of leveraging the techniques provided.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacexdispatch"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacexdispatch.html">xdispatch</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>libxdispatch is a C++ API build on top of libdispatch and simplifying the usage by providing an object-oriented way of leveraging the techniques provided. </p>
<h2><a class="anchor" id="xd_blocks"></a>
Use of Blocks</h2>
<p>When Apple introduced Grand Central Dispatch it extended its compilers by a new feature they called "Blocks". Basically this is lambdas (sometimes called closures as well). They allow an easier way to utilize the libdispatch api and are available when using Clang or the GCC 4.2 that's shipped with Apple's current Developer Tools.</p>
<p>Similiar to the original libdispatch api we provide blocks within the C++ interface as well. However as we need to support C++ only (and not C at the same time), we have more possibilities to support it. So instead of being limited to using Clang 2.0+ or Apple's patched GCC version (gcc 4.2 as available on OS X starting with 10.6 'Snow Leopard'), we can support a broader range of other compilers (e.g. MSVC, GCC 4.5+).</p>
<p>As we wanted to provide this "Blocks support" on Windows (using Visual Studio or MinGW) and Linux (using GCC), we had to come up with a way to achieve blocks behaviour without actually patching a compiler. Soon after discovering that Blocks are a bit borked when used with the patched gcc 4.2 in C++, we had a wonderful idea: As the emerging C++0x/C++11 standard would indeed have lambda support, all we had to do was implement support for lambdas when using the libdispatch API in C++.</p>
<p>The result can be found in <a class="el" href="lambda__blocks_8h.html">lambda_blocks.h</a> - Basically we added lambda detection and a macro to map between apples block syntax and the new lambda syntax. So basically the following lines do all the same:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="namespacexdispatch.html#a0084c3cb53bea140e88770b38c1e8489" title="Returns the global queue associated to the given Priority p.">xdispatch::global_queue</a>().<a class="code" href="classxdispatch_1_1queue.html#ad9cb47a2b49d7aa9c2bbffbf1cd35b78" title="Will dispatch the given operation for async execution on the queue and return immediately.">async</a>(${ printf(<span class="stringliteral">&quot;Hey Dude&quot;</span>); }); <span class="comment">// A macro automatically mapping to [=] or ^ depending on the compiler used</span>
<a class="code" href="namespacexdispatch.html#a0084c3cb53bea140e88770b38c1e8489" title="Returns the global queue associated to the given Priority p.">xdispatch::global_queue</a>().<a class="code" href="classxdispatch_1_1queue.html#ad9cb47a2b49d7aa9c2bbffbf1cd35b78" title="Will dispatch the given operation for async execution on the queue and return immediately.">async</a>([=]{ printf(<span class="stringliteral">&quot;Hey Dude&quot;</span>); }); <span class="comment">// The [=] is available on platforms supporting C++11 lambdas</span>
<a class="code" href="namespacexdispatch.html#a0084c3cb53bea140e88770b38c1e8489" title="Returns the global queue associated to the given Priority p.">xdispatch::global_queue</a>().<a class="code" href="classxdispatch_1_1queue.html#ad9cb47a2b49d7aa9c2bbffbf1cd35b78" title="Will dispatch the given operation for async execution on the queue and return immediately.">async</a>(^{ printf(<span class="stringliteral">&quot;Hey Dude&quot;</span>); }); <span class="comment">// The ^ is available on clang / Apple&#39;s gcc 4.2 only.</span>
</pre></div><p>So whenever you use a compiler featuring C++11 or Blocks you can use the block syntax. If not, you can still use the functor object interface. To become independent from a specific syntax (may it be [=] or ^), simply use $ - this can be easily redefined.</p>
<p>As the time of writing, the following compilers were tested using our 'cross blocks':</p>
<ul>
<li>Visual Studio 2010</li>
<li>GCC 4.5.1+, 4.6.x</li>
<li>clang 2.0, 3.0, 3.1</li>
<li>gcc 4.2 (latest apple version, although namespaces are quite broken there)</li>
</ul>
<p>All of our tests passed when using those systems.</p>
<dl class="section remark"><dt>Remarks:</dt><dd>Please note that when not using one of those compilers you can still use the entire libXDispatch interface, however the blocks support will be disabled.</dd>
<dd>
Also rememeber that some compilers want the C++0x/C++11 features to be explicitly enabled, e.g. GCC has to be called with the flag '-std=gnu++0x'.</dd></dl>
<h2><a class="anchor" id="xd_goodies"></a>
Goodies when using the libdispatch C API</h2>
<p>If for some reason you do not want to or are not allowed to use the C++ interface, we also offer C++ lambda implementations for the 'blocks-API' of the libdispatch C interface. These convenience functions include</p>
<ul>
<li>dispatch_async</li>
<li>dispatch_after</li>
<li>dispatch_sync</li>
<li>dispatch_apply</li>
<li>dispatch_group_async</li>
<li>dispatch_group_notify</li>
<li>dispatch_source_set_event_handler</li>
<li>dispatch_source_set_cancel_handler</li>
<li>dispatch_once</li>
</ul>
<p>See <a class="el" href="lambda__dispatch_8h.html">xdispatch/lambda_dispatch.h</a> and the <a class="el" href="group__dispatch.html">libdispatch</a> documentation for details on using these functions. By including the xdispatch headers (see <a class="el" href="group__xdispatch.html#xd_use">Usage</a>), all these functions will be available as well. Please note that despite only using the C API, you will still need to link against both, the dispatch and the xdispatch libraries.</p>
<h2><a class="anchor" id="xd_sync"></a>
Synchronize Keyword</h2>
<p>To simplify the threadsafe programming when using C++ we added a new synchronized { } keyword, loosely inspired by Java and Objective-C. This is a mechanism much easier to use than a standard mutex. Please see the documentation generated from <a class="el" href="synchronized_8h.html">xdispatch/synchronized.h</a> for details.</p>
<h2><a class="anchor" id="xd_use"></a>
Usage</h2>
<p>All header files needed for using libxdispatch can be included by typing </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;xdispatch/dispatch&gt;</span>
</pre></div><p> You will need to link against the xdispatch library. </p>
</div><!-- contents -->
<hr size="1"><address style="text-align: right; margin: 15px;"><small>
Generated on Sun Jan 27 2013 20:26:00 for XDispatch by&nbsp;<a href="http://www.doxygen.org/index.html">Doxygen 1.8.0</a><br/>
&copy 2010-2013 MLBA (<a href="http://www.mlba-team.de/impressum.htm">about</a> | <a href="http://www.mlba-team.de/impressum.htm">privacy</a>) All Rights reserved.</small></address>

<!-- Piwik 
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.mlba-team.de/piwik/" : "http://stats.mlba-team.de/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://stats.mlba-team.de/piwik/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->		 
</body>
</html>
